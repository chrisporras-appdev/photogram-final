<div class="row mb-3">
  <div class="col-md-8 offset-md-2">
    <h1>
      <%= @user.username %> details
    </h1>

    <div class="row mb-3">
      <div class="col">
        <a href="/users" class="btn btn-block btn-outline-secondary">
          Go back
        </a>
      </div>

      <div class="col">
        <a href="/delete_user/<%= @user.id %>" class="btn btn-block btn-outline-secondary">
          Delete user
        </a>
      </div>
    </div>

    <dl>
      <dt>
        Email
      </dt>
      <dd>
        <%= @user.email %>
      </dd>

      <dt>
        Comments count
      </dt>
      <dd>
        <%= @user.comments_count %>
      </dd>

      <dt>
        Likes count
      </dt>
      <dd>
        <%= @user.likes_count %>
      </dd>

      <dt>
        Is private
      </dt>
      <dd>
        <%= @user.is_private %>
      </dd>

      <dt>
        Username
      </dt>
      <dd>
        <%= @user.username %>
      </dd>

      <dt>
        Password
      </dt>
      <dd>
        <%= @user.password %>
      </dd>

      <dt>
        Created at
      </dt>
      <dd>
        <%= time_ago_in_words(@user.created_at) %> ago
      </dd>

      <dt>
        Updated at
      </dt>
      <dd>
        <%= time_ago_in_words(@user.updated_at) %> ago
      </dd>
    </dl>
  </div>
</div>

<hr>

<table>

<tr>
<th>
  Pending sent requests
</th>
</tr>

<% @user.pending_sent_follow_requests.each do |sent|%>
<tr>
  <td>
    <%=sent.recipient.username%>
  </td>
<%end%>
<tr>
<th>
  Pending recieved requests
</th>
</tr>

<% @user.pending_received_follow_requests.each do |rec|%>
  <td>
    <%=rec.sender.username%>
  </td>
</tr>
<%end%>

</table> 


<hr>


<div class="row mb-3">
  <div class="col-md-8 offset-md-2">
    <h2>
      Edit user
    </h2>

    <form action="/modify_user/<%= @user.id %>"  method="post" >
      <div class="form-group">
        <label for="email_box">
          Email
        </label>

        <input type="text" id="email_box" name="query_email" class="form-control" value="<%= @user.email %>">
      </div>

      <div class="form-group">
        <label for="comments_count_box">
          Comments count
        </label>

        <input type="text" id="comments_count_box" name="query_comments_count" class="form-control" value="<%= @user.comments_count %>">
      </div>

      <div class="form-group">
        <label for="likes_count_box">
          Likes count
        </label>

        <input type="text" id="likes_count_box" name="query_likes_count" class="form-control" value="<%= @user.likes_count %>">
      </div>

      <div class="custom-control custom-checkbox mb-3">
        <input type="checkbox" class="custom-control-input" id="is_private_box" name="query_is_private" value="1" <%= "checked" if @user.is_private %>>

        <label class="custom-control-label"
          for="is_private_box">Is private</label>
      </div>

      <div class="form-group">
        <label for="username_box">
          Username
        </label>

        <input type="text" id="username_box" name="query_username" class="form-control" value="<%= @user.username %>">
      </div>

      <div class="form-group">
        <label for="password_box">
          Password
        </label>

        <input type="text" id="password_box" name="query_password" class="form-control" value="<%= @user.password %>">
      </div>

      <button class="btn btn-block btn-outline-secondary">
        Update user
      </button>
    </form>
  </div>
</div>

<hr>


<div>
<h2>Own photos (<%= @user.own_photos.count %>)</h2>

<table border="1">
  <tr>
    <th>
      Image
    </th>

    <th>
      Owner
    </th>

    <th>
      Caption
    </th>

    <th>
      Posted
    </th>

    <th></th>

    <th>      
    <div>
     Delete?
    </th>
  </tr>

  <% @user.own_photos.each do |photo| %>
  <tr>
    <td>
      <img src="<%= photo.image %>">
    </td>

    <td>
      <%= photo.poster.username %>
    </td>

    <td>
      <%= photo.caption %>
    </td>

    <td>
      <%= time_ago_in_words(photo.created_at) %>
    </td>
    
    <td>
      <a href="/photos/<%= photo.id %>">
        Show details
      </a>
    </td>
    <td>   
    <div>
      <a href="/delete_photo/<%= photo.id %>" class="btn btn-block btn-outline-secondary">
          Delete photo
        </a>
      </div>
    </td>
  </tr>

  <% end %>
</table>


</div>
